#TYPEDEF OfBoolean
#TYPEDEF OfByte
#TYPEDEF OfChar
#TYPEDEF OfShort
#TYPEDEF OfInt
#TYPEDEF OfLong
#TYPEDEF OfFloat
#TYPEDEF OfDouble
#TYPEDEF OfRef
package omni.impl.seq;
import java.util.ArrayList;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import omni.impl.seq.$ClassPrefix$ArrSeq.UncheckedStack;
import omni.util.TypeConversionUtil;
import omni.util.EqualityUtil;
import omni.util.OmniArray;

#IF OfBoolean,OfInt,OfLong,OfDouble,OfRef
import java.util.function.$TypeNameModifier$Supplier;
#ELSE
import omni.function.$TypeNameModifier$Supplier;
#ENDIF


@SuppressWarnings({"rawtypes","unchecked"}) 
public class $ClassPrefix$ArrSeqUncheckedStackTest
{

  @Test
  public void testConstructors()
  {
    var stack=new UncheckedStack();
    Assertions.assertEquals(stack.size(),0);
    Assertions.assertTrue(stack.isEmpty());
    Assertions.assertTrue(stack.arr==OmniArray.Of$ClassPrefix$.DEFAULT_ARR);
    stack=new UncheckedStack(0);
    Assertions.assertEquals(stack.size(),0);
    Assertions.assertTrue(stack.isEmpty());
    Assertions.assertTrue(stack.arr==null);
    stack=new UncheckedStack(OmniArray.DEFAULT_ARR_SEQ_CAP);
    Assertions.assertEquals(stack.size(),0);
    Assertions.assertTrue(stack.isEmpty());
    Assertions.assertTrue(stack.arr==OmniArray.Of$ClassPrefix$.DEFAULT_ARR);
    for(int i=1;i<OmniArray.DEFAULT_ARR_SEQ_CAP;++i)
    {
      stack=new UncheckedStack(i);
      Assertions.assertEquals(stack.size(),0);
      Assertions.assertTrue(stack.isEmpty());
      Assertions.assertEquals(stack.arr.length,i);
    }
  }
 
  
  private static UncheckedStack generateStack(int length,$TypeNameModifier$Supplier supplier)
  {
    UncheckedStack stack=new UncheckedStack(length);
    for(int i=0;i<length;++i)
    {
#IF OfRef
      $ArrayType$ v=supplier.get();
#ELSE
      $ArrayType$ v=supplier.getAs$TypeNameModifier$();
#ENDIF
      
      stack.push(v);
    }
    return stack;
  }
  private static ArrayList generateList(int length,$TypeNameModifier$Supplier supplier)
  {
    ArrayList stack=new ArrayList(length);
    for(int i=0;i<length;++i)
    {
#IF OfRef
      $ArrayType$ v=supplier.get();
#ELSE
      $ArrayType$ v=supplier.getAs$TypeNameModifier$();
#ENDIF
      stack.add(v);
    }
    return stack;
  }
  
  
  @Test
  public void testClone()
  {
    var stack=new UncheckedStack();
    Object clonedObject=stack.clone();
    Assertions.assertTrue(clonedObject instanceof UncheckedStack);
    var clonedStack=(UncheckedStack)clonedObject;
    Assertions.assertTrue(clonedStack.arr==stack.arr);
    Assertions.assertEquals(clonedStack.size(),stack.size());
    Assertions.assertTrue(stack!=clonedStack);
    for(int i=0;i<100;++i)
    {
      #IF OfRef
      var val=TypeConversionUtil.convertToInteger(i);
      #ELSE
      var val=TypeConversionUtil.convertTo$exposedType$(i);
      #ENDIF
      stack.push(val);
    }
    Assertions.assertEquals(stack.size(),100);
    clonedObject=stack.clone();
    Assertions.assertTrue(clonedObject instanceof UncheckedStack);
    clonedStack=(UncheckedStack)clonedObject;
    Assertions.assertTrue(clonedStack.arr!=stack.arr);
    Assertions.assertEquals(stack.size(),clonedStack.size());
    EqualityUtil.uncheckedparallelassertarraysAreEqual(stack.arr,0,clonedStack.arr,0,stack.size());
  }
  
 
  @Test
  public void testEmptyHashCode()
  {
    Assertions.assertEquals(generateList(0,null).hashCode(),generateList(0,null).hashCode());
  }
  @Test
  public void testHashCode()
  {
    int length=100;
    $TypeNameModifier$Supplier stackGenerator=new $TypeNameModifier$Supplier()
    {
      int index=0;
#IF OfRef
      public $ArrayType$ get()
      {
        return TypeConversionUtil.convertToInteger(index++);
      } 
#ELSE
      public $ArrayType$ getAs$TypeNameModifier$()
      {
        return TypeConversionUtil.convertTo$exposedType$(index++);
      }
#ENDIF
    };
    $TypeNameModifier$Supplier listGenerator=new $TypeNameModifier$Supplier()
    {
      int index=length;
#IF OfRef
      public $ArrayType$ get()
      {
        return TypeConversionUtil.convertToInteger(--index);
      } 
#ELSE
      public $ArrayType$ getAs$TypeNameModifier$()
      {
        return TypeConversionUtil.convertTo$exposedType$(--index);
      }
#ENDIF
    };
    Assertions.assertEquals(generateList(length,listGenerator).hashCode(),generateStack(length,stackGenerator).hashCode());
    
  }
  
  

}